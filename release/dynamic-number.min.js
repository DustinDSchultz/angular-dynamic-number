!function(n,e,t){"use strict";function r(n,e){return n===t?"":","===e?String(n).replace(".",","):String(n)}function u(n,e){return","===e?String(n).replace(/\./g,"").replace(",","."):String(n).replace(/,/g,"")}function i(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function a(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function o(n,e){return","===n?",":"."===n?".":e}function c(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function f(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function s(n,e){return"floor"===n?Math.floor:"ceil"===n?Math.ceil:"round"===n?Math.round:e}function m(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function l(n,e){return"false"===n?!1:"true"===n?!0:e}function g(n,e,t,r,u){var i="-?";r===!1&&u===!0?i="-":r===!0&&u===!1&&(i="");var a="[0-9]{0,"+n+"}";0===n&&(a="0");var o="(\\"+t+"([0-9]){0,"+e+"})";return 0===e&&(o=""),new RegExp("^"+i+a+o+"?$")}function d(n){return String(n).replace(/^0+/g,"").replace(/^-0(\d+)/g,"-$1").replace(/^-([\.,])/g,"-0$1").replace(/^[\.,]/g,"0$&")}function v(n,e){return"."===e?String(n).replace(/\./g,""):String(n).replace(/,/g,"")}function p(n,e){return String(n).replace(/\B(?=(\d{3})+(?!\d))/g,e)}function S(n,e){n.$setViewValue(e),n.$render()}function h(n,e,t,u,i,a){if(n=Number(n),!isNaN(n)&&isFinite(n)){var o=Math.pow(10,e);return n=i?r((u(n*o)/o).toFixed(e),t):r(String(u(n*o)/o),t),a&&(n=p(n,"."===t?",":".")),n}return i?0..toFixed(e):"0"}function w(n){var e=0;if(document.selection){n.focus();var t=document.selection.createRange();t.moveStart("character",-n.value.length),e=t.text.length}else(n.selectionStart||"0"==n.selectionStart)&&(e=n.selectionStart);return e}function N(n,e){if(null!==n)if(n.createTextRange){var t=n.createTextRange();t.move("character",e),t.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(e,e)):n.focus()}function y(n,e,t){for(var r=0,u=0,i=0;i<n.length;i++)if(n[i]!==e){if(r++,r>=t)break}else u++;return u}function b(n){return{restrict:"A",require:"?ngModel",scope:{awnum:"@",numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@",numRound:"@",numThousand:"@"},link:function(e,m,b,$){if(!m[0]||"INPUT"!==m[0].tagName||"text"!==m[0].type)return void console.warn("Directive angular-dynamic-number works only for 'input' tag with type = 'text'");if(!$)return void console.warn("Directive angular-dynamic-number need ngModel attribute");var F={};e.awnum&&(F=n.getStrategy(e.awnum));var R=i(e.numInt!==t?e.numInt:F.numInt,6),x=a(e.numFract!==t?e.numFract:F.numFract,2),M=o(e.numSep!==t?e.numSep:F.numSep,"."),I=c(e.numPos!==t?e.numPos:F.numPos,!0),T=f(e.numNeg!==t?e.numNeg:F.numNeg,!0),P=s(e.numRound!==t?e.numRound:F.numRound,Math.round),V=l(e.numThousand!==t?e.numThousand:F.numThousand,!1);if(I===!1&&T===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var k=g(R,x,M,I,T);$.$parsers.unshift(function(n){var e=String(n);if(/^[\.,]{2,}/.test(e))return S($,0),0;var i=w(m[0]),a=e.slice(0,i),o=a.length;if(a=v(a,"."===M?",":"."),e=v(e,"."===M?",":"."),a=d(a),e=d(e),""===e&&"0"===String(n).charAt(0))return S($,0),0;if(e===t||""===e)return 0;if("-"===e)return S($,"-"),0;if(k.test(e)===!1){var c=r($.$modelValue,M);return V&&(c=p(c,"."===M?",":".")),S($,c),N(m[0],i-1),$.$modelValue}var f=0,s=i-o+a.length;return V&&(e=p(e,"."===M?",":"."),f=y(e,"."===M?",":".",s)),S($,e),N(m[0],s+f),u(e,M)}),$.$formatters.push(function(n){return h(n,x,M,P,!1,V)})}}}e.module("dynamicNumber",[]).provider("dynamicNumberStrategy",function(){var n={};this.addStrategy=function(e,t){n[e]=t},this.getStrategy=function(e){return n[e]},this.$get=function(){return{getStrategy:function(e){return n[e]}}}}).filter("awnum",function(){return function(n,e,t,r,u,i){var c=a(e,2),f=o(t,"."),g=s(r,Math.round),d=m(u,!1),v=l(i,!1);return h(n,c,f,g,d,v)}}).directive("awnum",["dynamicNumberStrategy",b])}(window,window.angular);