"use strict";function convModelToView(e,n){return","===n?String(e).replace(".",","):e}function convViewToModel(e,n){return","===n?String(e).replace(",","."):e}function initIntegerPart(e,n){if(e){var r=parseInt(e,10);if(isNaN(r)===!1&&isFinite(r)&&r>=0)return r}return n}function initFractionPart(e,n){if(e){var r=parseInt(e,10);if(isNaN(r)===!1&&isFinite(r)&&r>=0)return r}return n}function initSeparator(e,n){return","===e?",":"."===e?".":n}function initIsPositive(e,n){return"false"===e?!1:"true"===e?!0:n}function initIsNegative(e,n){return"false"===e?!1:"true"===e?!0:n}function buildRegexp(e,n,r,i,t){var a="-?";i===!1&&t===!0?a="-":i===!0&&t===!1&&(a="");var u="[0-9]{0,"+e+"}";0===e&&(u="0");var o="(\\"+r+"([0-9]){0,"+n+"})";return 0===n&&(o=""),new RegExp("^"+a+u+o+"?$")}function removeLeadingZero(e){return e.replace(/^0+/g,"").replace(/^-00+/g,"-0").replace(/-0+\[\.,]/,"-0$&").replace(/^[\.,]/g,"0$&")}function changeViewValue(e,n){e.$viewValue=n,e.$render()}function dynamicNumberDirective(){return{restrict:"A",require:"?ngModel",scope:{numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@"},link:function(e,n,r,i){var t=initIntegerPart(e.numInt,6),a=initFractionPart(e.numFract,2),u=initSeparator(e.numSep,"."),o=initIsPositive(e.numPos,!0),c=initIsNegative(e.numNeg,!0);if(o===!1&&c===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var s=buildRegexp(t,a,u,o,c);i.$parsers.unshift(function(e){var n=e;return n=removeLeadingZero(n),""===n&&"0"===e.charAt(0)?(changeViewValue(i,0),0):void 0===n||""===n?0:"-"===n?(changeViewValue(i,n),0):s.test(n)===!1?(changeViewValue(i,convModelToView(i.$modelValue,u)),i.$modelValue):(changeViewValue(i,n),convViewToModel(n,u))}),i.$formatters.push(function(e){return convModelToView(e,u)})}}}angular.module("dynamicNumber",[]).directive("awnum",dynamicNumberDirective);