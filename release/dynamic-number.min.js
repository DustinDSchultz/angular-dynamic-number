!function(n,e,t){"use strict";function r(n,e){return n===t?"":","===e?String(n).replace(".",","):String(n)}function u(n,e,t){return","===e?String(n).replace(/[\.\s]/g,"").replace(",","."):"."===e?String(n).replace(/[,\s]/g,""):void 0}function i(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function a(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function o(n,e){return","===n?",":"."===n?".":e}function c(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function s(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function f(n,e){return"floor"===n?Math.floor:"ceil"===n?Math.ceil:"round"===n?Math.round:e}function g(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function m(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function l(n,e,t){if(!n)return t;var r;return r="."===e?new RegExp("^[,\\s]$"):new RegExp("^[\\.\\s]$"),r.test(n)?n:t}function d(n,e,t,r,u){var i="-?";r===!1&&u===!0?i="-":r===!0&&u===!1&&(i="");var a="[0-9]{0,"+n+"}";0===n&&(a="0");var o="(\\"+t+"([0-9]){0,"+e+"})";return 0===e&&(o=""),new RegExp("^"+i+a+o+"?$")}function p(n){return String(n).replace(/^0+/g,"").replace(/^-0(\d+)/g,"-$1").replace(new RegExp("^-([\\.,\\s])","g"),"-0$1").replace(new RegExp("^[\\.,\\s]","g"),"0$&")}function v(n,e){return"."===e?String(n).replace(/\./g,""):","===e?String(n).replace(/,/g,""):String(n).replace(new RegExp("\\s","g"),"")}function S(n,e){return n=String(n).split("."),n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),n.join(".")}function h(n,e){n.$setViewValue(e),n.$render()}function w(n,e,t,u,i,a,o){if(n=Number(n),!isNaN(n)&&isFinite(n)){var c=Math.pow(10,e);return n=i?r((u(n*c)/c).toFixed(e),t):r(String(u(n*c)/c),t),a&&(n=S(n,o)),n}return i?0..toFixed(e):"0"}function N(n){var e=0;if(document.selection){n.focus();var t=document.selection.createRange();t.moveStart("character",-n.value.length),e=t.text.length}else(n.selectionStart||"0"==n.selectionStart)&&(e=n.selectionStart);return e}function R(n,e){if(null!==n)if(n.createTextRange){var t=n.createTextRange();t.move("character",e),t.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(e,e)):n.focus()}function x(n,e,t){for(var r=0,u=0,i=0;i<n.length;i++)if(n[i]!==e){if(r++,r>=t)break}else u++;return u}function y(n){return{restrict:"A",require:"?ngModel",scope:{awnum:"@",numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@",numRound:"@",numThousand:"@",numThousandSep:"@"},link:function(e,g,y,$){if(!g[0]||"INPUT"!==g[0].tagName||"text"!==g[0].type)return void console.warn("Directive angular-dynamic-number works only for 'input' tag with type = 'text'");if(!$)return void console.warn("Directive angular-dynamic-number need ngModel attribute");var b={};e.awnum&&(b=n.getStrategy(e.awnum));var T=i(e.numInt!==t?e.numInt:b.numInt,6),F=a(e.numFract!==t?e.numFract:b.numFract,2),E=o(e.numSep!==t?e.numSep:b.numSep,"."),M=c(e.numPos!==t?e.numPos:b.numPos,!0),I=s(e.numNeg!==t?e.numNeg:b.numNeg,!0),P=f(e.numRound!==t?e.numRound:b.numRound,Math.round),V=m(e.numThousand!==t?e.numThousand:b.numThousand,!1),k=l(e.numThousandSep!==t?e.numThousandSep:b.numThousandSep,E,"."===E?",":".");if(M===!1&&I===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var A=d(T,F,E,M,I);$.$parsers.unshift(function(n){var e=String(n);if(new RegExp("^[.,"+k+"]{2,}").test(e))return h($,0),0;var i=N(g[0]),a=e.slice(0,i),o=a.length;if(a=v(a,k),e=v(e,k),a=p(a),e=p(e),""===e&&"0"===String(n).charAt(0))return h($,0),0;if(e===t||""===e)return 0;if("-"===e)return h($,"-"),0;if(A.test(e)===!1){var c=r($.$modelValue,E);return V&&(c=S(c,k)),h($,c),R(g[0],i-1),$.$modelValue}var s=0,f=i-o+a.length;return V&&(e=S(e,k),s=x(e,k,f)),h($,e),R(g[0],f+s),u(e,E,k)}),$.$formatters.push(function(n){return w(n,F,E,P,!1,V,k)})}}}e.module("dynamicNumber",[]).provider("dynamicNumberStrategy",function(){var n={};this.addStrategy=function(e,t){n[e]=t},this.getStrategy=function(e){return n[e]},this.$get=function(){return{getStrategy:function(e){return n[e]}}}}).filter("awnum",function(){return function(n,e,t,r,u,i,c){var s=a(e,2),d=o(t,"."),p=f(r,Math.round),v=g(u,!1),S=m(i,!1),h=l(c,d,"."===d?",":".");return w(n,s,d,p,v,S,h)}}).directive("awnum",["dynamicNumberStrategy",y])}(window,window.angular);