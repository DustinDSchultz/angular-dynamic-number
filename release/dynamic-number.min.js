!function(n,e,t){"use strict";function r(n,e,r,u){if(n===t)return"";var i="";return i=","===e?String(n).replace(".",","):String(n),a(i,r,u)}function u(n,e,t){return","===e?String(n).replace(/[\.\s]/g,"").replace(",","."):"."===e?String(n).replace(/[,\s]/g,""):void 0}function a(n,e,t){var r=n;return t&&(r+=t),e&&(r=/^\-.+/.test(r)?r.replace("-","-"+e):/^\-/.test(r)?r:e+r),r}function i(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function o(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function c(n,e){return","===n?",":"."===n?".":e}function s(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function m(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function p(n,e){return"floor"===n?Math.floor:"ceil"===n?Math.ceil:"round"===n?Math.round:e}function d(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function f(n,e){return"false"===n||n===!1?!1:"true"===n||n===!0?!0:e}function g(n,e,t){if(!n)return t;var r;return r="."===e?new RegExp("^[,\\s]$"):new RegExp("^[\\.\\s]$"),r.test(n)?n:t}function l(n){var e=new RegExp("[^\\d,\\.\\s\\-]{1}");return e.test(n)?n:null}function v(n,e,t,r,u){var a="-?";r===!1&&u===!0?a="-":r===!0&&u===!1&&(a="");var i="[0-9]{0,"+n+"}";0===n&&(i="0");var o="(\\"+t+"([0-9]){0,"+e+"})";return 0===e&&(o=""),new RegExp("^"+a+i+o+"?$")}function S(n){return String(n).replace(/^0+/g,"").replace(/^-0(\d+)/g,"-$1").replace(new RegExp("^-([\\.,\\s])","g"),"-0$1").replace(new RegExp("^[\\.,\\s]","g"),"0$&")}function h(n,e,t){var r=n;return e&&(r=r.replace(new RegExp("[\\"+e+"]","g"),"")),t&&(r=r.replace(new RegExp("[\\"+t+"]","g"),"")),r}function w(n,e){return"."===e?String(n).replace(/\./g,""):","===e?String(n).replace(/,/g,""):String(n).replace(new RegExp("\\s","g"),"")}function N(n,e){return n=String(n).split("."),n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),n.join(".")}function R(n,e,t,r){n.$setViewValue(a(e,t,r)),n.$render()}function x(n,e,u,a,i,o,c,s,m){if(""===n||n===t||null===n)return"";if(n=Number(n),!isNaN(n)&&isFinite(n)){var p=Math.pow(10,e);return n=i?r((a(n*p)/p).toFixed(e),u,s,m):r(String(a(n*p)/p),u,s,m),o&&(n=N(n,c)),n}return i?0..toFixed(e):"0"}function T(n){var e=0;if(document.selection){n.focus();var t=document.selection.createRange();t.moveStart("character",-n.value.length),e=t.text.length}else(n.selectionStart||"0"==n.selectionStart)&&(e=n.selectionStart);return e}function P(n,e){if(null!==n)if(n.createTextRange){var t=n.createTextRange();t.move("character",e),t.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(e,e)):n.focus()}function b(n,e,t){for(var r=0,u=0,a=0;a<n.length;a++)if(n[a]!==e){if(r++,r>=t)break}else u++;return u}function $(n,e,t){var r={awnum:n.awnum,numInt:n.numInt,numFract:n.numFract,numSep:n.numSep,numPos:n.numPos,numNeg:n.numNeg,numRound:n.numRound,numThousand:n.numThousand,numThousandSep:n.numThousandSep,numPrepend:n.numPrepend,numAppend:n.numAppend};return e&&(r[e]=t),r}function y(n,e,r,u,a){var d={};n.awnum&&(d=a.getStrategy(n.awnum));var S=i(n.numInt!==t?n.numInt:d.numInt,6),h=o(n.numFract!==t?n.numFract:d.numFract,2),w=c(n.numSep!==t?n.numSep:d.numSep,"."),N=s(n.numPos!==t?n.numPos:d.numPos,!0),R=m(n.numNeg!==t?n.numNeg:d.numNeg,!0),x=p(n.numRound!==t?n.numRound:d.numRound,Math.round),T=f(n.numThousand!==t?n.numThousand:d.numThousand,!1),P=g(n.numThousandSep!==t?n.numThousandSep:d.numThousandSep,w,"."===w?",":"."),b=l(n.numPrepend!==t?n.numPrepend:d.numPrepend),$=l(n.numAppend!==t?n.numAppend:d.numAppend);if(N===!1&&R===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var y=v(S,h,w,N,R);return{element:e,attrs:r,ngModelController:u,viewRegexTest:y,integerPart:S,fractionPart:h,fractionSeparator:w,isPositiveNumber:N,isNegativeNumber:R,roundFunction:x,isThousandSeparator:T,thousandSeparator:P,prepend:b,append:$}}function F(n,e){var a=e.element,i=(e.attrs,e.ngModelController),o=e.viewRegexTest,c=(e.integerPart,e.fractionPart,e.fractionSeparator),s=(e.isPositiveNumber,e.isNegativeNumber,e.roundFunction,e.isThousandSeparator),m=e.thousandSeparator,p=e.prepend,d=e.append,f=String(n);if(f=h(f,p,d),new RegExp("^[.,"+m+"]{2,}").test(f))return R(i,0,p,d),0;var g=T(a[0]);p&&g--;var l=f.slice(0,g);if(l=w(l,m),f=w(f,m),l=S(l),f=S(f),""===f&&"0"===String(n).charAt(0))return R(i,0,p,d),0;if(f===t||""===f)return 0;if("-"===f)return R(i,"-",p,d),0;if(o.test(f)===!1){var v=r(i.$modelValue,c,p,d);return s&&(v=N(v,m)),R(i,v,p,d),P(a[0],g-1),i.$modelValue}var x=0,$=l.length;return s&&(f=N(f,m),x=b(f,m,$)),p&&(x++,new RegExp("^(\\-\\d)$").test(f)&&(x+=2),new RegExp("^(\\d)$").test(f)&&x++),R(i,f,p,d),P(a[0],$+x),setTimeout(function(){P(a[0],$+x)},1),u(f,c,m)}function E(n){return{restrict:"A",require:"?ngModel",scope:{awnum:"@",numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@",numRound:"@",numThousand:"@",numThousandSep:"@",numPrepend:"@",numAppend:"@"},link:function(e,t,r,u){if(!t[0]||"INPUT"!==t[0].tagName||"text"!==t[0].type)return void console.warn("Directive angular-dynamic-number works only for 'input' tag with type = 'text'");if(!u)return void console.warn("Directive angular-dynamic-number need ngModel attribute");var a=y($(e),t,r,u,n);u.$parsers.unshift(function(n){return F(n,a)}),u.$formatters.push(function(n){return x(n,a.fractionPart,a.fractionSeparator,a.roundFunction,!1,a.isThousandSeparator,a.thousandSeparator,a.prepend,a.append)})}}}e.module("dynamicNumber",[]).provider("dynamicNumberStrategy",function(){var n={};this.addStrategy=function(e,t){n[e]=t},this.getStrategy=function(e){return n[e]},this.$get=function(){return{getStrategy:function(e){return n[e]}}}}).filter("awnum",function(){return function(n,e,t,r,u,a,i,s,m){var v=o(e,2),S=c(t,"."),h=p(r,Math.round),w=d(u,!1),N=f(a,!1),R=g(i,S,"."===S?",":"."),T=l(s),P=l(m),b=x(n,v,S,h,w,N,R,T,P);return""===b?"0":b}}).directive("awnum",["dynamicNumberStrategy",E])}(window,window.angular);