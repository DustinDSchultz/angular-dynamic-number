!function(e,n,t){"use strict";function r(e,n){return e===t?"":","===n?String(e).replace(".",","):String(e)}function u(e,n){return","===n?String(e).replace(/\./g,"").replace(",","."):String(e).replace(/,/g,"")}function i(e,n){if(e>=0){var t=parseInt(e,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return n}function a(e,n){if(e>=0){var t=parseInt(e,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return n}function o(e,n){return","===e?",":"."===e?".":n}function c(e,n){return"false"===e?!1:"true"===e?!0:n}function f(e,n){return"false"===e?!1:"true"===e?!0:n}function l(e,n){return"floor"===e?Math.floor:"ceil"===e?Math.ceil:"round"===e?Math.round:n}function s(e,n){return"false"===e?!1:"true"===e?!0:n}function g(e,n){return"false"===e?!1:"true"===e?!0:n}function m(e,n,t,r,u){var i="-?";r===!1&&u===!0?i="-":r===!0&&u===!1&&(i="");var a="[0-9]{0,"+e+"}";0===e&&(a="0");var o="(\\"+t+"([0-9]){0,"+n+"})";return 0===n&&(o=""),new RegExp("^"+i+a+o+"?$")}function d(e){return String(e).replace(/^0+/g,"").replace(/^-0(\d+)/g,"-$1").replace(/^-([\.,])/g,"-0$1").replace(/^[\.,]/g,"0$&")}function v(e,n){return"."===n?String(e).replace(/\./g,""):String(e).replace(/,/g,"")}function p(e,n){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,n)}function h(e,n){e.$setViewValue(n),e.$render()}function S(e,n,t,u,i,a){if(e=Number(e),!isNaN(e)&&isFinite(e)){var o=Math.pow(10,n);return e=i?r((u(e*o)/o).toFixed(n),t):r(String(u(e*o)/o),t),a&&(e=p(e,"."===t?",":".")),e}return i?0..toFixed(n):"0"}function w(e){var n=0;if(document.selection){e.focus();var t=document.selection.createRange();t.moveStart("character",-e.value.length),n=t.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(n=e.selectionStart);return n}function N(e,n){if(null!==e)if(e.createTextRange){var t=e.createTextRange();t.move("character",n),t.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(n,n)):e.focus()}function y(e,n,t){for(var r=0,u=0,i=0;i<e.length;i++)if(e[i]!==n){if(r++,r>=t)break}else u++;return u}function b(e){return{restrict:"A",require:"?ngModel",scope:{awnum:"@",numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@",numRound:"@",numThousand:"@"},link:function(e,n,s,b){if(!n[0]||"INPUT"!==n[0].tagName||"text"!==n[0].type)return void console.warn("Directive angular-dynamic-number works only for 'input' tag with type = 'text'");if(!b)return void console.warn("Directive angular-dynamic-number need ngModel attribute");var $=i(e.numInt,6),x=a(e.numFract,2),M=o(e.numSep,"."),F=c(e.numPos,!0),R=f(e.numNeg,!0),I=l(e.numRound,Math.round),T=g(e.numThousand,!1);if(F===!1&&R===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var V=m($,x,M,F,R);b.$parsers.unshift(function(e){var i=String(e);if(/^[\.,]{2,}/.test(i))return h(b,0),0;var a=w(n[0]),o=i.slice(0,a),c=o.length;if(o=v(o,"."===M?",":"."),i=v(i,"."===M?",":"."),o=d(o),i=d(i),""===i&&"0"===String(e).charAt(0))return h(b,0),0;if(i===t||""===i)return 0;if("-"===i)return h(b,"-"),0;if(V.test(i)===!1){var f=r(b.$modelValue,M);return T&&(f=p(f,"."===M?",":".")),h(b,f),N(n[0],a-1),b.$modelValue}var l=0,s=a-c+o.length;return T&&(i=p(i,"."===M?",":"."),l=y(i,"."===M?",":".",s)),h(b,i),N(n[0],s+l),u(i,M)}),b.$formatters.push(function(e){return S(e,x,M,I,!1,T)})}}}n.module("dynamicNumber",[]).provider("dynamicNumberStrategy",function(){var e={};this.addStrategy=function(n,t){e[n]=t},this.getStrategy=function(n){return e[n]},this.$get=function(){return{getStrategy:function(n){return e[n]}}}}).filter("awnum",function(){return function(e,n,t,r,u,i){var c=a(n,2),f=o(t,"."),m=l(r,Math.round),d=s(u,!1),v=g(i,!1);return S(e,c,f,m,d,v)}}).directive("awnum",["dynamicNumberStrategy",b])}(window,window.angular);